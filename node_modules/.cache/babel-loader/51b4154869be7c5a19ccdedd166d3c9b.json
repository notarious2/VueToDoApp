{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from \"pinia\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\nconst router = useRouter();\nexport const useAuthStore = defineStore(\"authentication\", {\n  state: () => ({\n    token: \"\",\n    // initialize state from local storage to enable user to stay logged in\n    user: JSON.parse(localStorage.getItem(\"user\"))\n  }),\n  actions: {\n    async login(username, password) {\n      const params = new URLSearchParams();\n      params.append(\"username\", username.value);\n      params.append(\"password\", password.value);\n      const headers = {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      };\n      axios.post(\"http://localhost:8000/login\", params, {\n        headers: headers\n      }).then(response => {\n        // store user details and jwt in local storage to keep user logged in between page refreshes\n        localStorage.setItem(\"user\", JSON.stringify(response.data)); // update pinia state\n\n        this.token = response.data[\"access_token\"];\n        console.log(this.token);\n        router.push({\n          path: \"/tasks\" || \"/\"\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n\n  }\n});","map":{"version":3,"names":["defineStore","axios","useRouter","router","useAuthStore","state","token","user","JSON","parse","localStorage","getItem","actions","login","username","password","params","URLSearchParams","append","value","headers","Accept","post","then","response","setItem","stringify","data","console","log","push","path","catch","error"],"sources":["C:/Users/notar/Desktop/Udemy/todo_front/src/stores/userAuth.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"vue-router\";\r\nconst router = useRouter();\r\n\r\nexport const useAuthStore = defineStore(\"authentication\", {\r\n  state: () => ({\r\n    token: \"\",\r\n    // initialize state from local storage to enable user to stay logged in\r\n    user: JSON.parse(localStorage.getItem(\"user\")),\r\n  }),\r\n  actions: {\r\n    async login(username, password) {\r\n      const params = new URLSearchParams();\r\n      params.append(\"username\", username.value);\r\n      params.append(\"password\", password.value);\r\n\r\n      const headers = {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      };\r\n      axios\r\n        .post(\"http://localhost:8000/login\", params, {\r\n          headers: headers,\r\n        })\r\n        .then((response) => {\r\n          // store user details and jwt in local storage to keep user logged in between page refreshes\r\n\r\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n          // update pinia state\r\n          this.token = response.data[\"access_token\"];\r\n\r\n          console.log(this.token);\r\n\r\n          router.push({ path: \"/tasks\" || \"/\" });\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n  },\r\n});\r\n"],"mappings":";AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,MAAMC,MAAM,GAAGD,SAAS,EAAxB;AAEA,OAAO,MAAME,YAAY,GAAGJ,WAAW,CAAC,gBAAD,EAAmB;EACxDK,KAAK,EAAE,OAAO;IACZC,KAAK,EAAE,EADK;IAEZ;IACAC,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX;EAHM,CAAP,CADiD;EAMxDC,OAAO,EAAE;IACP,MAAMC,KAAN,CAAYC,QAAZ,EAAsBC,QAAtB,EAAgC;MAC9B,MAAMC,MAAM,GAAG,IAAIC,eAAJ,EAAf;MACAD,MAAM,CAACE,MAAP,CAAc,UAAd,EAA0BJ,QAAQ,CAACK,KAAnC;MACAH,MAAM,CAACE,MAAP,CAAc,UAAd,EAA0BH,QAAQ,CAACI,KAAnC;MAEA,MAAMC,OAAO,GAAG;QACdC,MAAM,EAAE,kBADM;QAEd,gBAAgB;MAFF,CAAhB;MAIApB,KAAK,CACFqB,IADH,CACQ,6BADR,EACuCN,MADvC,EAC+C;QAC3CI,OAAO,EAAEA;MADkC,CAD/C,EAIGG,IAJH,CAISC,QAAD,IAAc;QAClB;QAEAd,YAAY,CAACe,OAAb,CAAqB,MAArB,EAA6BjB,IAAI,CAACkB,SAAL,CAAeF,QAAQ,CAACG,IAAxB,CAA7B,EAHkB,CAIlB;;QACA,KAAKrB,KAAL,GAAakB,QAAQ,CAACG,IAAT,CAAc,cAAd,CAAb;QAEAC,OAAO,CAACC,GAAR,CAAY,KAAKvB,KAAjB;QAEAH,MAAM,CAAC2B,IAAP,CAAY;UAAEC,IAAI,EAAE,YAAY;QAApB,CAAZ;MACD,CAdH,EAeGC,KAfH,CAeUC,KAAD,IAAW;QAChBL,OAAO,CAACC,GAAR,CAAYI,KAAZ;MACD,CAjBH;IAkBD;;EA5BM;AAN+C,CAAnB,CAAhC"},"metadata":{},"sourceType":"module"}