{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from \"pinia\";\nimport axios from \"axios\";\nimport authHeader from \"../services/auth-header\";\nexport const useTaskStore = defineStore(\"tasks\", {\n  state: () => ({\n    display: false,\n    tasksList: [],\n    tasksSlice: [],\n    date: new Date().toISOString().slice(0, 10),\n    enteredText: \"\",\n    editedText: \"\",\n    invalidInput: false\n  }),\n  getters: {\n    loadOneTask(task_date) {\n      if (this.tasksList.filter(arr => arr[\"date\"] === task_date).length === 0) {\n        this.display = false;\n        this.tasksSlice = [];\n      } else {\n        // console.log(tasksList.value.filter((arr) => arr[\"date\"] === task_date)[0]);\n        this.tasksSlice = this.tasksList.filter(arr => arr[\"date\"] === task_date)[0];\n        this.display = true; // SORT THE SLICE\n\n        this.tasksSlice.tasks.sort((a, b) => a.priority > b.priority ? 1 : b.priority > a.priority ? -1 : 0);\n      }\n    }\n\n  },\n  actions: {\n    async loadTasks() {\n      try {\n        const response = await axios.get(\"http://localhost:8000/task\", {\n          headers: authHeader()\n        }); // working with response\n\n        const result = response.data;\n        const newArray = [];\n        result.forEach(element => {\n          if (!newArray.filter(arr => arr[\"date\"] === element.date).length > 0) {\n            newArray.push({\n              date: element.date,\n              tasks: [{ ...element,\n                editable: false\n              }]\n            });\n          } else {\n            const idx = newArray.findIndex(arr => arr.date === element.date);\n            newArray[idx].tasks.push({ ...element,\n              editable: false\n            });\n          }\n        }); // tasksList.value = newArray;\n\n        console.log(\"Load...\");\n        return newArray;\n      } catch (err) {\n        if (err.response.status === 401) {\n          localStorage.removeItem(\"user\");\n        }\n\n        console.log(err.response.status);\n      }\n    },\n\n    // loadOneTask(task_date) {\n    //   if (\n    //     this.tasksList.filter((arr) => arr[\"date\"] === task_date).length === 0\n    //   ) {\n    //     this.display = false;\n    //     this.tasksSlice = [];\n    //   } else {\n    //     // console.log(tasksList.value.filter((arr) => arr[\"date\"] === task_date)[0]);\n    //     this.tasksSlice = this.tasksList.filter(\n    //       (arr) => arr[\"date\"] === task_date\n    //     )[0];\n    //     this.display = true;\n    //     // SORT THE SLICE\n    //     this.tasksSlice.tasks.sort((a, b) =>\n    //       a.priority > b.priority ? 1 : b.priority > a.priority ? -1 : 0\n    //     );\n    //   }\n    // },\n    // Checking or unchecking specific object in an array\n    async checkUncheck(element) {\n      try {\n        await axios.patch(\"http://localhost:8000/task/update/\" + element.task_id, {\n          completed: element.completed ? false : true\n        }, {\n          headers: authHeader()\n        });\n        console.log(\"Completed!\"); // rerender ALL to-do tasks\n\n        this.tasksList = await this.loadTasks(); // get selected date's slice\n\n        this.loadOneTask(this.date);\n      } catch (err) {\n        console.log(err);\n\n        if (err.response.status === 401) {\n          localStorage.removeItem(\"user\");\n        }\n      }\n    },\n\n    // adding the task - Post Request\n    async addNewTask() {\n      // priority is 1 if there are not tasks on that day, else it is autoincremented\n      const priority = \"date\" in this.tasksSlice ? this.tasksSlice.tasks.length + 1 : 1;\n\n      if (this.enteredText !== \"\") {\n        try {\n          await axios.post(\"http://localhost:8000/task\", {\n            priority: priority,\n            date: this.date,\n            text: this.enteredText,\n            completed: false\n          }, {\n            headers: authHeader()\n          });\n          console.log(\"Add request\"); // rerender ALL to-do tasks\n\n          this.tasksList = await this.loadTasks(); // get selected date's slice\n\n          this.loadOneTask(this.date); //clear input field\n\n          this.enteredText = \"\";\n        } catch (err) {\n          if (err.response.status === 401) {\n            localStorage.removeItem(\"user\");\n          }\n\n          console.log(err);\n        }\n      } else {\n        this.invalidInput = true;\n      }\n    },\n\n    // clear invalid input - to be used at blur\n    clearInvalidInput() {\n      this.invalidInput = false;\n    },\n\n    // Deleting specific task\n    async deleteTask(element) {\n      try {\n        await axios.get(\"http://localhost:8000/task/delete/\" + element.task_id, {\n          headers: authHeader()\n        }); // rerender ALL to-do tasks\n\n        console.log(\"Deleted!\");\n        this.tasksList = await this.loadTasks(); // get selected date's slice\n\n        this.loadOneTask(this.date);\n      } catch (err) {\n        console.log(err);\n\n        if (err.response.status === 401) {\n          localStorage.removeItem(\"user\");\n        }\n      }\n\n      this.updatePriority();\n    },\n\n    // update tasks index/id on change - on drag / also used for deletion\n    async updatePriority() {\n      // GET changed priorities FIRST\n      const prioritiesList = {};\n\n      for (const idx in this.tasksSlice.tasks) {\n        if (this.tasksSlice.tasks[idx].priority !== Number(idx) + 1) {\n          prioritiesList[this.tasksSlice.tasks[idx].task_id] = Number(idx) + 1;\n        }\n      }\n\n      if (Object.keys(prioritiesList).length > 0) {\n        const payload = {};\n        payload[this.date] = prioritiesList; // Update MULTIPLE field with ONE PATCH Request\n\n        try {\n          await axios.patch(\"http://localhost:8000/task/update_order\", { ...payload\n          }, {\n            headers: authHeader()\n          });\n          console.log(\"Multiple Rows Update!\");\n        } catch (err) {\n          console.log(err);\n\n          if (err.response.status === 401) {\n            localStorage.removeItem(\"user\");\n          }\n        }\n\n        this.tasksList = await this.loadTasks();\n        this.loadOneTask(this.date);\n      }\n    },\n\n    // Apply EDIT changes at blur\n    async applyEditChanges(element) {\n      // No need to send HTTP request if Text is unchanged\n      if (this.editedText && this.editedText !== element.text) {\n        try {\n          await axios.patch(\"http://localhost:8000/task/update/\" + element.task_id, {\n            text: this.editedText\n          }, {\n            headers: authHeader()\n          });\n          console.log(\"Edited!\"); // rerender ALL to-do tasks\n\n          this.tasksList = await this.loadTasks(); // get selected date's slice\n\n          this.loadOneTask(this.date);\n        } catch (err) {\n          if (err.response.status === 401) {\n            localStorage.removeItem(\"user\");\n          }\n\n          console.log(err);\n        }\n      }\n    }\n\n  }\n});","map":{"version":3,"names":["defineStore","axios","authHeader","useTaskStore","state","display","tasksList","tasksSlice","date","Date","toISOString","slice","enteredText","editedText","invalidInput","getters","loadOneTask","task_date","filter","arr","length","tasks","sort","a","b","priority","actions","loadTasks","response","get","headers","result","data","newArray","forEach","element","push","editable","idx","findIndex","console","log","err","status","localStorage","removeItem","checkUncheck","patch","task_id","completed","addNewTask","post","text","clearInvalidInput","deleteTask","updatePriority","prioritiesList","Number","Object","keys","payload","applyEditChanges"],"sources":["C:/Users/notar/Desktop/Udemy/todo_front/src/components/store/TaskStore.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport authHeader from \"../services/auth-header\";\r\n\r\nexport const useTaskStore = defineStore(\"tasks\", {\r\n  state: () => ({\r\n    display: false,\r\n    tasksList: [],\r\n    tasksSlice: [],\r\n    date: new Date().toISOString().slice(0, 10),\r\n    enteredText: \"\",\r\n    editedText: \"\",\r\n    invalidInput: false,\r\n  }),\r\n  getters: {\r\n    loadOneTask(task_date) {\r\n      if (\r\n        this.tasksList.filter((arr) => arr[\"date\"] === task_date).length === 0\r\n      ) {\r\n        this.display = false;\r\n        this.tasksSlice = [];\r\n      } else {\r\n        // console.log(tasksList.value.filter((arr) => arr[\"date\"] === task_date)[0]);\r\n        this.tasksSlice = this.tasksList.filter(\r\n          (arr) => arr[\"date\"] === task_date\r\n        )[0];\r\n        this.display = true;\r\n        // SORT THE SLICE\r\n        this.tasksSlice.tasks.sort((a, b) =>\r\n          a.priority > b.priority ? 1 : b.priority > a.priority ? -1 : 0\r\n        );\r\n      }\r\n    },\r\n  },\r\n  actions: {\r\n    async loadTasks() {\r\n      try {\r\n        const response = await axios.get(\"http://localhost:8000/task\", {\r\n          headers: authHeader(),\r\n        });\r\n        // working with response\r\n        const result = response.data;\r\n        const newArray = [];\r\n        result.forEach((element) => {\r\n          if (\r\n            !newArray.filter((arr) => arr[\"date\"] === element.date).length > 0\r\n          ) {\r\n            newArray.push({\r\n              date: element.date,\r\n              tasks: [{ ...element, editable: false }],\r\n            });\r\n          } else {\r\n            const idx = newArray.findIndex((arr) => arr.date === element.date);\r\n            newArray[idx].tasks.push({ ...element, editable: false });\r\n          }\r\n        });\r\n        // tasksList.value = newArray;\r\n        console.log(\"Load...\");\r\n        return newArray;\r\n      } catch (err) {\r\n        if (err.response.status === 401) {\r\n          localStorage.removeItem(\"user\");\r\n        }\r\n        console.log(err.response.status);\r\n      }\r\n    },\r\n    // loadOneTask(task_date) {\r\n    //   if (\r\n    //     this.tasksList.filter((arr) => arr[\"date\"] === task_date).length === 0\r\n    //   ) {\r\n    //     this.display = false;\r\n    //     this.tasksSlice = [];\r\n    //   } else {\r\n    //     // console.log(tasksList.value.filter((arr) => arr[\"date\"] === task_date)[0]);\r\n    //     this.tasksSlice = this.tasksList.filter(\r\n    //       (arr) => arr[\"date\"] === task_date\r\n    //     )[0];\r\n    //     this.display = true;\r\n    //     // SORT THE SLICE\r\n    //     this.tasksSlice.tasks.sort((a, b) =>\r\n    //       a.priority > b.priority ? 1 : b.priority > a.priority ? -1 : 0\r\n    //     );\r\n    //   }\r\n    // },\r\n\r\n    // Checking or unchecking specific object in an array\r\n    async checkUncheck(element) {\r\n      try {\r\n        await axios.patch(\r\n          \"http://localhost:8000/task/update/\" + element.task_id,\r\n          { completed: element.completed ? false : true },\r\n          { headers: authHeader() }\r\n        );\r\n        console.log(\"Completed!\");\r\n        // rerender ALL to-do tasks\r\n        this.tasksList = await this.loadTasks();\r\n        // get selected date's slice\r\n        this.loadOneTask(this.date);\r\n      } catch (err) {\r\n        console.log(err);\r\n        if (err.response.status === 401) {\r\n          localStorage.removeItem(\"user\");\r\n        }\r\n      }\r\n    },\r\n    // adding the task - Post Request\r\n    async addNewTask() {\r\n      // priority is 1 if there are not tasks on that day, else it is autoincremented\r\n      const priority =\r\n        \"date\" in this.tasksSlice ? this.tasksSlice.tasks.length + 1 : 1;\r\n      if (this.enteredText !== \"\") {\r\n        try {\r\n          await axios.post(\r\n            \"http://localhost:8000/task\",\r\n            {\r\n              priority: priority,\r\n              date: this.date,\r\n              text: this.enteredText,\r\n              completed: false,\r\n            },\r\n            {\r\n              headers: authHeader(),\r\n            }\r\n          );\r\n          console.log(\"Add request\");\r\n\r\n          // rerender ALL to-do tasks\r\n          this.tasksList = await this.loadTasks();\r\n          // get selected date's slice\r\n          this.loadOneTask(this.date);\r\n          //clear input field\r\n          this.enteredText = \"\";\r\n        } catch (err) {\r\n          if (err.response.status === 401) {\r\n            localStorage.removeItem(\"user\");\r\n          }\r\n          console.log(err);\r\n        }\r\n      } else {\r\n        this.invalidInput = true;\r\n      }\r\n    },\r\n    // clear invalid input - to be used at blur\r\n    clearInvalidInput() {\r\n      this.invalidInput = false;\r\n    },\r\n    // Deleting specific task\r\n\r\n    async deleteTask(element) {\r\n      try {\r\n        await axios.get(\r\n          \"http://localhost:8000/task/delete/\" + element.task_id,\r\n          {\r\n            headers: authHeader(),\r\n          }\r\n        );\r\n\r\n        // rerender ALL to-do tasks\r\n        console.log(\"Deleted!\");\r\n        this.tasksList = await this.loadTasks();\r\n        // get selected date's slice\r\n        this.loadOneTask(this.date);\r\n      } catch (err) {\r\n        console.log(err);\r\n        if (err.response.status === 401) {\r\n          localStorage.removeItem(\"user\");\r\n        }\r\n      }\r\n      this.updatePriority();\r\n    },\r\n    // update tasks index/id on change - on drag / also used for deletion\r\n    async updatePriority() {\r\n      // GET changed priorities FIRST\r\n      const prioritiesList = {};\r\n      for (const idx in this.tasksSlice.tasks) {\r\n        if (this.tasksSlice.tasks[idx].priority !== Number(idx) + 1) {\r\n          prioritiesList[this.tasksSlice.tasks[idx].task_id] = Number(idx) + 1;\r\n        }\r\n      }\r\n      if (Object.keys(prioritiesList).length > 0) {\r\n        const payload = {};\r\n        payload[this.date] = prioritiesList;\r\n        // Update MULTIPLE field with ONE PATCH Request\r\n        try {\r\n          await axios.patch(\r\n            \"http://localhost:8000/task/update_order\",\r\n            {\r\n              ...payload,\r\n            },\r\n            {\r\n              headers: authHeader(),\r\n            }\r\n          );\r\n          console.log(\"Multiple Rows Update!\");\r\n        } catch (err) {\r\n          console.log(err);\r\n          if (err.response.status === 401) {\r\n            localStorage.removeItem(\"user\");\r\n          }\r\n        }\r\n\r\n        this.tasksList = await this.loadTasks();\r\n        this.loadOneTask(this.date);\r\n      }\r\n    },\r\n    // Apply EDIT changes at blur\r\n    async applyEditChanges(element) {\r\n      // No need to send HTTP request if Text is unchanged\r\n      if (this.editedText && this.editedText !== element.text) {\r\n        try {\r\n          await axios.patch(\r\n            \"http://localhost:8000/task/update/\" + element.task_id,\r\n            { text: this.editedText },\r\n            { headers: authHeader() }\r\n          );\r\n          console.log(\"Edited!\");\r\n          // rerender ALL to-do tasks\r\n          this.tasksList = await this.loadTasks();\r\n          // get selected date's slice\r\n          this.loadOneTask(this.date);\r\n        } catch (err) {\r\n          if (err.response.status === 401) {\r\n            localStorage.removeItem(\"user\");\r\n          }\r\n          console.log(err);\r\n        }\r\n      }\r\n    },\r\n  },\r\n});\r\n"],"mappings":";AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AAEA,OAAO,MAAMC,YAAY,GAAGH,WAAW,CAAC,OAAD,EAAU;EAC/CI,KAAK,EAAE,OAAO;IACZC,OAAO,EAAE,KADG;IAEZC,SAAS,EAAE,EAFC;IAGZC,UAAU,EAAE,EAHA;IAIZC,IAAI,EAAE,IAAIC,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,CAA/B,EAAkC,EAAlC,CAJM;IAKZC,WAAW,EAAE,EALD;IAMZC,UAAU,EAAE,EANA;IAOZC,YAAY,EAAE;EAPF,CAAP,CADwC;EAU/CC,OAAO,EAAE;IACPC,WAAW,CAACC,SAAD,EAAY;MACrB,IACE,KAAKX,SAAL,CAAeY,MAAf,CAAuBC,GAAD,IAASA,GAAG,CAAC,MAAD,CAAH,KAAgBF,SAA/C,EAA0DG,MAA1D,KAAqE,CADvE,EAEE;QACA,KAAKf,OAAL,GAAe,KAAf;QACA,KAAKE,UAAL,GAAkB,EAAlB;MACD,CALD,MAKO;QACL;QACA,KAAKA,UAAL,GAAkB,KAAKD,SAAL,CAAeY,MAAf,CACfC,GAAD,IAASA,GAAG,CAAC,MAAD,CAAH,KAAgBF,SADT,EAEhB,CAFgB,CAAlB;QAGA,KAAKZ,OAAL,GAAe,IAAf,CALK,CAML;;QACA,KAAKE,UAAL,CAAgBc,KAAhB,CAAsBC,IAAtB,CAA2B,CAACC,CAAD,EAAIC,CAAJ,KACzBD,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAf,GAA0B,CAA1B,GAA8BD,CAAC,CAACC,QAAF,GAAaF,CAAC,CAACE,QAAf,GAA0B,CAAC,CAA3B,GAA+B,CAD/D;MAGD;IACF;;EAlBM,CAVsC;EA8B/CC,OAAO,EAAE;IACP,MAAMC,SAAN,GAAkB;MAChB,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAM3B,KAAK,CAAC4B,GAAN,CAAU,4BAAV,EAAwC;UAC7DC,OAAO,EAAE5B,UAAU;QAD0C,CAAxC,CAAvB,CADE,CAIF;;QACA,MAAM6B,MAAM,GAAGH,QAAQ,CAACI,IAAxB;QACA,MAAMC,QAAQ,GAAG,EAAjB;QACAF,MAAM,CAACG,OAAP,CAAgBC,OAAD,IAAa;UAC1B,IACE,CAACF,QAAQ,CAACf,MAAT,CAAiBC,GAAD,IAASA,GAAG,CAAC,MAAD,CAAH,KAAgBgB,OAAO,CAAC3B,IAAjD,EAAuDY,MAAxD,GAAiE,CADnE,EAEE;YACAa,QAAQ,CAACG,IAAT,CAAc;cACZ5B,IAAI,EAAE2B,OAAO,CAAC3B,IADF;cAEZa,KAAK,EAAE,CAAC,EAAE,GAAGc,OAAL;gBAAcE,QAAQ,EAAE;cAAxB,CAAD;YAFK,CAAd;UAID,CAPD,MAOO;YACL,MAAMC,GAAG,GAAGL,QAAQ,CAACM,SAAT,CAAoBpB,GAAD,IAASA,GAAG,CAACX,IAAJ,KAAa2B,OAAO,CAAC3B,IAAjD,CAAZ;YACAyB,QAAQ,CAACK,GAAD,CAAR,CAAcjB,KAAd,CAAoBe,IAApB,CAAyB,EAAE,GAAGD,OAAL;cAAcE,QAAQ,EAAE;YAAxB,CAAzB;UACD;QACF,CAZD,EAPE,CAoBF;;QACAG,OAAO,CAACC,GAAR,CAAY,SAAZ;QACA,OAAOR,QAAP;MACD,CAvBD,CAuBE,OAAOS,GAAP,EAAY;QACZ,IAAIA,GAAG,CAACd,QAAJ,CAAae,MAAb,KAAwB,GAA5B,EAAiC;UAC/BC,YAAY,CAACC,UAAb,CAAwB,MAAxB;QACD;;QACDL,OAAO,CAACC,GAAR,CAAYC,GAAG,CAACd,QAAJ,CAAae,MAAzB;MACD;IACF,CA/BM;;IAgCP;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA,MAAMG,YAAN,CAAmBX,OAAnB,EAA4B;MAC1B,IAAI;QACF,MAAMlC,KAAK,CAAC8C,KAAN,CACJ,uCAAuCZ,OAAO,CAACa,OAD3C,EAEJ;UAAEC,SAAS,EAAEd,OAAO,CAACc,SAAR,GAAoB,KAApB,GAA4B;QAAzC,CAFI,EAGJ;UAAEnB,OAAO,EAAE5B,UAAU;QAArB,CAHI,CAAN;QAKAsC,OAAO,CAACC,GAAR,CAAY,YAAZ,EANE,CAOF;;QACA,KAAKnC,SAAL,GAAiB,MAAM,KAAKqB,SAAL,EAAvB,CARE,CASF;;QACA,KAAKX,WAAL,CAAiB,KAAKR,IAAtB;MACD,CAXD,CAWE,OAAOkC,GAAP,EAAY;QACZF,OAAO,CAACC,GAAR,CAAYC,GAAZ;;QACA,IAAIA,GAAG,CAACd,QAAJ,CAAae,MAAb,KAAwB,GAA5B,EAAiC;UAC/BC,YAAY,CAACC,UAAb,CAAwB,MAAxB;QACD;MACF;IACF,CAtEM;;IAuEP;IACA,MAAMK,UAAN,GAAmB;MACjB;MACA,MAAMzB,QAAQ,GACZ,UAAU,KAAKlB,UAAf,GAA4B,KAAKA,UAAL,CAAgBc,KAAhB,CAAsBD,MAAtB,GAA+B,CAA3D,GAA+D,CADjE;;MAEA,IAAI,KAAKR,WAAL,KAAqB,EAAzB,EAA6B;QAC3B,IAAI;UACF,MAAMX,KAAK,CAACkD,IAAN,CACJ,4BADI,EAEJ;YACE1B,QAAQ,EAAEA,QADZ;YAEEjB,IAAI,EAAE,KAAKA,IAFb;YAGE4C,IAAI,EAAE,KAAKxC,WAHb;YAIEqC,SAAS,EAAE;UAJb,CAFI,EAQJ;YACEnB,OAAO,EAAE5B,UAAU;UADrB,CARI,CAAN;UAYAsC,OAAO,CAACC,GAAR,CAAY,aAAZ,EAbE,CAeF;;UACA,KAAKnC,SAAL,GAAiB,MAAM,KAAKqB,SAAL,EAAvB,CAhBE,CAiBF;;UACA,KAAKX,WAAL,CAAiB,KAAKR,IAAtB,EAlBE,CAmBF;;UACA,KAAKI,WAAL,GAAmB,EAAnB;QACD,CArBD,CAqBE,OAAO8B,GAAP,EAAY;UACZ,IAAIA,GAAG,CAACd,QAAJ,CAAae,MAAb,KAAwB,GAA5B,EAAiC;YAC/BC,YAAY,CAACC,UAAb,CAAwB,MAAxB;UACD;;UACDL,OAAO,CAACC,GAAR,CAAYC,GAAZ;QACD;MACF,CA5BD,MA4BO;QACL,KAAK5B,YAAL,GAAoB,IAApB;MACD;IACF,CA3GM;;IA4GP;IACAuC,iBAAiB,GAAG;MAClB,KAAKvC,YAAL,GAAoB,KAApB;IACD,CA/GM;;IAgHP;IAEA,MAAMwC,UAAN,CAAiBnB,OAAjB,EAA0B;MACxB,IAAI;QACF,MAAMlC,KAAK,CAAC4B,GAAN,CACJ,uCAAuCM,OAAO,CAACa,OAD3C,EAEJ;UACElB,OAAO,EAAE5B,UAAU;QADrB,CAFI,CAAN,CADE,CAQF;;QACAsC,OAAO,CAACC,GAAR,CAAY,UAAZ;QACA,KAAKnC,SAAL,GAAiB,MAAM,KAAKqB,SAAL,EAAvB,CAVE,CAWF;;QACA,KAAKX,WAAL,CAAiB,KAAKR,IAAtB;MACD,CAbD,CAaE,OAAOkC,GAAP,EAAY;QACZF,OAAO,CAACC,GAAR,CAAYC,GAAZ;;QACA,IAAIA,GAAG,CAACd,QAAJ,CAAae,MAAb,KAAwB,GAA5B,EAAiC;UAC/BC,YAAY,CAACC,UAAb,CAAwB,MAAxB;QACD;MACF;;MACD,KAAKU,cAAL;IACD,CAvIM;;IAwIP;IACA,MAAMA,cAAN,GAAuB;MACrB;MACA,MAAMC,cAAc,GAAG,EAAvB;;MACA,KAAK,MAAMlB,GAAX,IAAkB,KAAK/B,UAAL,CAAgBc,KAAlC,EAAyC;QACvC,IAAI,KAAKd,UAAL,CAAgBc,KAAhB,CAAsBiB,GAAtB,EAA2Bb,QAA3B,KAAwCgC,MAAM,CAACnB,GAAD,CAAN,GAAc,CAA1D,EAA6D;UAC3DkB,cAAc,CAAC,KAAKjD,UAAL,CAAgBc,KAAhB,CAAsBiB,GAAtB,EAA2BU,OAA5B,CAAd,GAAqDS,MAAM,CAACnB,GAAD,CAAN,GAAc,CAAnE;QACD;MACF;;MACD,IAAIoB,MAAM,CAACC,IAAP,CAAYH,cAAZ,EAA4BpC,MAA5B,GAAqC,CAAzC,EAA4C;QAC1C,MAAMwC,OAAO,GAAG,EAAhB;QACAA,OAAO,CAAC,KAAKpD,IAAN,CAAP,GAAqBgD,cAArB,CAF0C,CAG1C;;QACA,IAAI;UACF,MAAMvD,KAAK,CAAC8C,KAAN,CACJ,yCADI,EAEJ,EACE,GAAGa;UADL,CAFI,EAKJ;YACE9B,OAAO,EAAE5B,UAAU;UADrB,CALI,CAAN;UASAsC,OAAO,CAACC,GAAR,CAAY,uBAAZ;QACD,CAXD,CAWE,OAAOC,GAAP,EAAY;UACZF,OAAO,CAACC,GAAR,CAAYC,GAAZ;;UACA,IAAIA,GAAG,CAACd,QAAJ,CAAae,MAAb,KAAwB,GAA5B,EAAiC;YAC/BC,YAAY,CAACC,UAAb,CAAwB,MAAxB;UACD;QACF;;QAED,KAAKvC,SAAL,GAAiB,MAAM,KAAKqB,SAAL,EAAvB;QACA,KAAKX,WAAL,CAAiB,KAAKR,IAAtB;MACD;IACF,CA1KM;;IA2KP;IACA,MAAMqD,gBAAN,CAAuB1B,OAAvB,EAAgC;MAC9B;MACA,IAAI,KAAKtB,UAAL,IAAmB,KAAKA,UAAL,KAAoBsB,OAAO,CAACiB,IAAnD,EAAyD;QACvD,IAAI;UACF,MAAMnD,KAAK,CAAC8C,KAAN,CACJ,uCAAuCZ,OAAO,CAACa,OAD3C,EAEJ;YAAEI,IAAI,EAAE,KAAKvC;UAAb,CAFI,EAGJ;YAAEiB,OAAO,EAAE5B,UAAU;UAArB,CAHI,CAAN;UAKAsC,OAAO,CAACC,GAAR,CAAY,SAAZ,EANE,CAOF;;UACA,KAAKnC,SAAL,GAAiB,MAAM,KAAKqB,SAAL,EAAvB,CARE,CASF;;UACA,KAAKX,WAAL,CAAiB,KAAKR,IAAtB;QACD,CAXD,CAWE,OAAOkC,GAAP,EAAY;UACZ,IAAIA,GAAG,CAACd,QAAJ,CAAae,MAAb,KAAwB,GAA5B,EAAiC;YAC/BC,YAAY,CAACC,UAAb,CAAwB,MAAxB;UACD;;UACDL,OAAO,CAACC,GAAR,CAAYC,GAAZ;QACD;MACF;IACF;;EAjMM;AA9BsC,CAAV,CAAhC"},"metadata":{},"sourceType":"module"}