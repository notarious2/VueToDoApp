{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from \"pinia\";\nimport axios from \"axios\";\nimport { useRouter, useRoute } from \"vue-router\";\nconst router = useRouter();\nconst route = useRoute();\nconsole.log(route);\nconsole.log(router);\nexport const useAuthStore = defineStore(\"authentication\", {\n  state: () => ({\n    token: \"\",\n    // initialize state from local storage to enable user to stay logged in\n    user: JSON.parse(localStorage.getItem(\"user\"))\n  }),\n  actions: {\n    login(username, password) {\n      const params = new URLSearchParams();\n      console.log(username);\n      console.log(username.value);\n      console.log(password.value);\n      params.append(\"username\", username);\n      params.append(\"password\", password);\n      const headers = {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      };\n      axios.post(\"http://localhost:8000/login\", params, {\n        headers: headers\n      }).then(response => {\n        // store user details and jwt in local storage to keep user logged in between page refreshes\n        localStorage.setItem(\"user\", JSON.stringify(response.data)); // update pinia state\n\n        this.token = response.data[\"access_token\"];\n        console.log(this.token);\n        router.push({\n          path: \"/tasks\"\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n\n  }\n});","map":{"version":3,"names":["defineStore","axios","useRouter","useRoute","router","route","console","log","useAuthStore","state","token","user","JSON","parse","localStorage","getItem","actions","login","username","password","params","URLSearchParams","value","append","headers","Accept","post","then","response","setItem","stringify","data","push","path","catch","error"],"sources":["C:/Users/notar/Desktop/Udemy/todo_front/src/stores/userAuth.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nconst router = useRouter();\r\nconst route = useRoute();\r\n\r\nconsole.log(route);\r\nconsole.log(router);\r\nexport const useAuthStore = defineStore(\"authentication\", {\r\n  state: () => ({\r\n    token: \"\",\r\n    // initialize state from local storage to enable user to stay logged in\r\n    user: JSON.parse(localStorage.getItem(\"user\")),\r\n  }),\r\n  actions: {\r\n    login(username, password) {\r\n      const params = new URLSearchParams();\r\n      console.log(username);\r\n      console.log(username.value);\r\n      console.log(password.value);\r\n      params.append(\"username\", username);\r\n      params.append(\"password\", password);\r\n\r\n      const headers = {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      };\r\n      axios\r\n        .post(\"http://localhost:8000/login\", params, {\r\n          headers: headers,\r\n        })\r\n        .then((response) => {\r\n          // store user details and jwt in local storage to keep user logged in between page refreshes\r\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n\r\n          // update pinia state\r\n          this.token = response.data[\"access_token\"];\r\n\r\n          console.log(this.token);\r\n          router.push({ path: \"/tasks\" });\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n  },\r\n});\r\n"],"mappings":";AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,YAApC;AACA,MAAMC,MAAM,GAAGF,SAAS,EAAxB;AACA,MAAMG,KAAK,GAAGF,QAAQ,EAAtB;AAEAG,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAC,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACA,OAAO,MAAMI,YAAY,GAAGR,WAAW,CAAC,gBAAD,EAAmB;EACxDS,KAAK,EAAE,OAAO;IACZC,KAAK,EAAE,EADK;IAEZ;IACAC,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX;EAHM,CAAP,CADiD;EAMxDC,OAAO,EAAE;IACPC,KAAK,CAACC,QAAD,EAAWC,QAAX,EAAqB;MACxB,MAAMC,MAAM,GAAG,IAAIC,eAAJ,EAAf;MACAf,OAAO,CAACC,GAAR,CAAYW,QAAZ;MACAZ,OAAO,CAACC,GAAR,CAAYW,QAAQ,CAACI,KAArB;MACAhB,OAAO,CAACC,GAAR,CAAYY,QAAQ,CAACG,KAArB;MACAF,MAAM,CAACG,MAAP,CAAc,UAAd,EAA0BL,QAA1B;MACAE,MAAM,CAACG,MAAP,CAAc,UAAd,EAA0BJ,QAA1B;MAEA,MAAMK,OAAO,GAAG;QACdC,MAAM,EAAE,kBADM;QAEd,gBAAgB;MAFF,CAAhB;MAIAxB,KAAK,CACFyB,IADH,CACQ,6BADR,EACuCN,MADvC,EAC+C;QAC3CI,OAAO,EAAEA;MADkC,CAD/C,EAIGG,IAJH,CAISC,QAAD,IAAc;QAClB;QACAd,YAAY,CAACe,OAAb,CAAqB,MAArB,EAA6BjB,IAAI,CAACkB,SAAL,CAAeF,QAAQ,CAACG,IAAxB,CAA7B,EAFkB,CAIlB;;QACA,KAAKrB,KAAL,GAAakB,QAAQ,CAACG,IAAT,CAAc,cAAd,CAAb;QAEAzB,OAAO,CAACC,GAAR,CAAY,KAAKG,KAAjB;QACAN,MAAM,CAAC4B,IAAP,CAAY;UAAEC,IAAI,EAAE;QAAR,CAAZ;MACD,CAbH,EAcGC,KAdH,CAcUC,KAAD,IAAW;QAChB7B,OAAO,CAACC,GAAR,CAAY4B,KAAZ;MACD,CAhBH;IAiBD;;EA9BM;AAN+C,CAAnB,CAAhC"},"metadata":{},"sourceType":"module"}