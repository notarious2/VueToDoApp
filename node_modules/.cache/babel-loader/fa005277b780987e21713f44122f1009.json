{"ast":null,"code":"const updateStorage = (strategy, store) => {\n  const storage = strategy.storage || sessionStorage;\n  const storeKey = strategy.key || store.$id;\n\n  if (strategy.paths) {\n    const partialState = strategy.paths.reduce((finalObj, key) => {\n      finalObj[key] = store.$state[key];\n      return finalObj;\n    }, {});\n    storage.setItem(storeKey, JSON.stringify(partialState));\n  } else {\n    storage.setItem(storeKey, JSON.stringify(store.$state));\n  }\n};\n\nvar index = ({\n  options,\n  store\n}) => {\n  var _a, _b, _c, _d;\n\n  if ((_a = options.persist) == null ? void 0 : _a.enabled) {\n    const defaultStrat = [{\n      key: store.$id,\n      storage: sessionStorage\n    }];\n    const strategies = ((_c = (_b = options.persist) == null ? void 0 : _b.strategies) == null ? void 0 : _c.length) ? (_d = options.persist) == null ? void 0 : _d.strategies : defaultStrat;\n    strategies.forEach(strategy => {\n      const storage = strategy.storage || sessionStorage;\n      const storeKey = strategy.key || store.$id;\n      const storageResult = storage.getItem(storeKey);\n\n      if (storageResult) {\n        store.$patch(JSON.parse(storageResult));\n        updateStorage(strategy, store);\n      }\n    });\n    store.$subscribe(() => {\n      strategies.forEach(strategy => {\n        updateStorage(strategy, store);\n      });\n    });\n  }\n};\n\nexport { index as default, updateStorage };","map":{"version":3,"names":["updateStorage","strategy","store","storage","sessionStorage","storeKey","key","$id","paths","partialState","reduce","finalObj","$state","setItem","JSON","stringify","index","options","_a","_b","_c","_d","persist","enabled","defaultStrat","strategies","length","forEach","storageResult","getItem","$patch","parse","$subscribe","default"],"sources":["C:/Users/notar/Desktop/Udemy/todo_front/node_modules/pinia-plugin-persist/dist/pinia-persist.es.js"],"sourcesContent":["const updateStorage = (strategy, store) => {\n  const storage = strategy.storage || sessionStorage;\n  const storeKey = strategy.key || store.$id;\n  if (strategy.paths) {\n    const partialState = strategy.paths.reduce((finalObj, key) => {\n      finalObj[key] = store.$state[key];\n      return finalObj;\n    }, {});\n    storage.setItem(storeKey, JSON.stringify(partialState));\n  } else {\n    storage.setItem(storeKey, JSON.stringify(store.$state));\n  }\n};\nvar index = ({ options, store }) => {\n  var _a, _b, _c, _d;\n  if ((_a = options.persist) == null ? void 0 : _a.enabled) {\n    const defaultStrat = [{\n      key: store.$id,\n      storage: sessionStorage\n    }];\n    const strategies = ((_c = (_b = options.persist) == null ? void 0 : _b.strategies) == null ? void 0 : _c.length) ? (_d = options.persist) == null ? void 0 : _d.strategies : defaultStrat;\n    strategies.forEach((strategy) => {\n      const storage = strategy.storage || sessionStorage;\n      const storeKey = strategy.key || store.$id;\n      const storageResult = storage.getItem(storeKey);\n      if (storageResult) {\n        store.$patch(JSON.parse(storageResult));\n        updateStorage(strategy, store);\n      }\n    });\n    store.$subscribe(() => {\n      strategies.forEach((strategy) => {\n        updateStorage(strategy, store);\n      });\n    });\n  }\n};\nexport { index as default, updateStorage };\n"],"mappings":"AAAA,MAAMA,aAAa,GAAG,CAACC,QAAD,EAAWC,KAAX,KAAqB;EACzC,MAAMC,OAAO,GAAGF,QAAQ,CAACE,OAAT,IAAoBC,cAApC;EACA,MAAMC,QAAQ,GAAGJ,QAAQ,CAACK,GAAT,IAAgBJ,KAAK,CAACK,GAAvC;;EACA,IAAIN,QAAQ,CAACO,KAAb,EAAoB;IAClB,MAAMC,YAAY,GAAGR,QAAQ,CAACO,KAAT,CAAeE,MAAf,CAAsB,CAACC,QAAD,EAAWL,GAAX,KAAmB;MAC5DK,QAAQ,CAACL,GAAD,CAAR,GAAgBJ,KAAK,CAACU,MAAN,CAAaN,GAAb,CAAhB;MACA,OAAOK,QAAP;IACD,CAHoB,EAGlB,EAHkB,CAArB;IAIAR,OAAO,CAACU,OAAR,CAAgBR,QAAhB,EAA0BS,IAAI,CAACC,SAAL,CAAeN,YAAf,CAA1B;EACD,CAND,MAMO;IACLN,OAAO,CAACU,OAAR,CAAgBR,QAAhB,EAA0BS,IAAI,CAACC,SAAL,CAAeb,KAAK,CAACU,MAArB,CAA1B;EACD;AACF,CAZD;;AAaA,IAAII,KAAK,GAAG,CAAC;EAAEC,OAAF;EAAWf;AAAX,CAAD,KAAwB;EAClC,IAAIgB,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB;;EACA,IAAI,CAACH,EAAE,GAAGD,OAAO,CAACK,OAAd,KAA0B,IAA1B,GAAiC,KAAK,CAAtC,GAA0CJ,EAAE,CAACK,OAAjD,EAA0D;IACxD,MAAMC,YAAY,GAAG,CAAC;MACpBlB,GAAG,EAAEJ,KAAK,CAACK,GADS;MAEpBJ,OAAO,EAAEC;IAFW,CAAD,CAArB;IAIA,MAAMqB,UAAU,GAAG,CAAC,CAACL,EAAE,GAAG,CAACD,EAAE,GAAGF,OAAO,CAACK,OAAd,KAA0B,IAA1B,GAAiC,KAAK,CAAtC,GAA0CH,EAAE,CAACM,UAAnD,KAAkE,IAAlE,GAAyE,KAAK,CAA9E,GAAkFL,EAAE,CAACM,MAAtF,IAAgG,CAACL,EAAE,GAAGJ,OAAO,CAACK,OAAd,KAA0B,IAA1B,GAAiC,KAAK,CAAtC,GAA0CD,EAAE,CAACI,UAA7I,GAA0JD,YAA7K;IACAC,UAAU,CAACE,OAAX,CAAoB1B,QAAD,IAAc;MAC/B,MAAME,OAAO,GAAGF,QAAQ,CAACE,OAAT,IAAoBC,cAApC;MACA,MAAMC,QAAQ,GAAGJ,QAAQ,CAACK,GAAT,IAAgBJ,KAAK,CAACK,GAAvC;MACA,MAAMqB,aAAa,GAAGzB,OAAO,CAAC0B,OAAR,CAAgBxB,QAAhB,CAAtB;;MACA,IAAIuB,aAAJ,EAAmB;QACjB1B,KAAK,CAAC4B,MAAN,CAAahB,IAAI,CAACiB,KAAL,CAAWH,aAAX,CAAb;QACA5B,aAAa,CAACC,QAAD,EAAWC,KAAX,CAAb;MACD;IACF,CARD;IASAA,KAAK,CAAC8B,UAAN,CAAiB,MAAM;MACrBP,UAAU,CAACE,OAAX,CAAoB1B,QAAD,IAAc;QAC/BD,aAAa,CAACC,QAAD,EAAWC,KAAX,CAAb;MACD,CAFD;IAGD,CAJD;EAKD;AACF,CAvBD;;AAwBA,SAASc,KAAK,IAAIiB,OAAlB,EAA2BjC,aAA3B"},"metadata":{},"sourceType":"module"}